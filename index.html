<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emoji</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="normalize.css" />

    <!-- needs for emoji -->
    <link
      rel="modulepreload"
      href="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/picker.js"
    />
    <link
      rel="modulepreload"
      href="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/database.js"
    />
    <style></style>
  </head>
  <body>
    <button class="button" id="button" onclick="myFunction()">Add emoji</button>
    <!-- sort: true -->
    <div id="sortTrue" class="list-group">
      <div class="deletelast" onclick="deleteLast()">
        <?xml version="1.0" encoding="utf-8"?>

        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
        <svg
          fill="#ffffff"
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          width="40px"
          height="40px"
          viewBox="0 0 512 512"
          enable-background="new 0 0 512 512"
          xml:space="preserve"
        >
          <polygon
            points="335.188,154.188 256,233.375 176.812,154.188 154.188,176.812 233.375,256 154.188,335.188 176.812,357.812 
	256,278.625 335.188,357.812 357.812,335.188 278.625,256 357.812,176.812 "
          />
          <path
            d="M256,0C114.609,0,0,114.609,0,256s114.609,256,256,256s256-114.609,256-256S397.391,0,256,0z M256,472
	c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472z"
          />
        </svg>
      </div>
    </div>
    <main>
      <div class="flex">
        <div>
          <!-- emoji picker keyboard -->
          <emoji-picker id="emojipicker"></emoji-picker>
        </div>
      </div>
    </main>
    <div class="cross" id="cross" onclick="myFunction()">
      <?xml version="1.0" encoding="utf-8"?>

      <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
      <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
      <svg
        fill="#ffffff"
        version="1.1"
        id="Layer_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        width="100%"
        height="100%"
        viewBox="0 0 512 512"
        enable-background="new 0 0 512 512"
        xml:space="preserve"
      >
        <polygon
          points="335.188,154.188 256,233.375 176.812,154.188 154.188,176.812 233.375,256 154.188,335.188 176.812,357.812 
	256,278.625 335.188,357.812 357.812,335.188 278.625,256 357.812,176.812 "
        />
        <path
          d="M256,0C114.609,0,0,114.609,0,256s114.609,256,256,256s256-114.609,256-256S397.391,0,256,0z M256,472
	c-119.297,0-216-96.703-216-216S136.703,40,256,40s216,96.703,216,216S375.297,472,256,472z"
        />
      </svg>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.js"></script>
    <script defer src="script.js"></script>
    <script defer>
      const sortTrue = document.querySelector("#sortTrue");
      const sortFalse = document.querySelector("#sortFalse");

      // sort: true
      Sortable.create(sortTrue, {
        group: "sorting",
        sort: true,
        removeOnSpill: true, // Enable plugin
        // Called when item is spilled
        onSpill: function (/**Event*/ evt) {
          evt.item; // The spilled item
        },
      });
    </script>

    <!-- needs for emoji keyboard -->
    <script type="module" defer>
      import "https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/picker.js";
      import "https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/database.js"; // avoid extra round-trip

      const $ = document.querySelector.bind(document);
      const $$ = (_) => Array.from(document.querySelectorAll(_));
      let customEmoji;

      // See https://stackoverflow.com/a/8533927
      function supportsSelector(selector) {
        const style = document.createElement("style");
        document.head.appendChild(style);
        try {
          style.sheet.insertRule(selector + "{}", 0);
        } catch (e) {
          return false;
        } finally {
          document.head.removeChild(style);
        }
        return true;
      }

      // check for private browsing mode to show the warning
      async function hasIDB() {
        if (typeof indexedDB === "undefined") {
          return false;
        }

        try {
          const idbFailed = await new Promise((resolve) => {
            const db = indexedDB.open("test-idb");
            db.onerror = () => resolve(true);
            db.onsuccess = () => {
              indexedDB.deleteDatabase("test-idb");
              resolve(false);
            };
          });
          if (idbFailed) {
            return false;
          }
        } catch (e) {
          return false;
        }
        return true;
      }

      async function loadCustomEmoji() {
        if (customEmoji) {
          return;
        }
        const categoriesToCustomEmoji = await (
          await fetch("./custom.json")
        ).json();
        customEmoji = [];
        for (const [category, names] of Object.entries(
          categoriesToCustomEmoji
        )) {
          for (const name of names) {
            customEmoji.push({
              category: category || undefined,
              name,
              shortcodes: [name],
              url: `./custom/${name}.svg`,
            });
          }
        }
      }

      const focusVisiblePolyfillPromise =
        !supportsSelector(":focus-visible") &&
        import(
          "https://cdn.jsdelivr.net/npm/focus-visible@^5/dist/focus-visible.js"
        );
    </script>
    <script defer>
      let emoj;

      document
        .querySelector("emoji-picker")
        .addEventListener("emoji-click", (event) => {
          console.log(event.detail.unicode);
          let li = document.createElement("div");
          li.className = "list-group-item";
          li.innerHTML = `${event.detail.unicode}`;
          document.querySelector("#sortTrue").append(li);
        });
    </script>
  </body>
</html>
